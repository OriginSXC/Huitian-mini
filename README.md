<div align="center">

# Huitian-mini

è½»é‡çº§ **Yunzai / TRSS / Miao / NapCat(OneBot v11)** æ’ä»¶åˆé›†  
**æ—©æŠ¥ Â· æ‘¸é±¼æ—¥å† Â· ç±³æ¸¸ç¤¾ COS Â· WP æŠ“å›¾ Â· éšæœºå›¾/è§†é¢‘**

[![license](https://img.shields.io/github/license/OriginSXC/Huitian-mini)](./LICENSE)
![node](https://img.shields.io/badge/node-%3E%3D18-brightgreen)
[![stars](https://img.shields.io/github/stars/OriginSXC/Huitian-mini?style=flat)](https://github.com/OriginSXC/Huitian-mini/stargazers)
[![issues](https://img.shields.io/github/issues/OriginSXC/Huitian-mini)](https://github.com/OriginSXC/Huitian-mini/issues)

</div>

## åŠŸèƒ½ä¸€è§ˆ

- âœ… **æŒ‡ä»¤è§¦å‘ + å®šæ—¶æ¨é€**ï¼ˆnode-scheduleï¼‰
- âœ… **åˆå¹¶è½¬å‘**ï¼ˆOneBot / icqqï¼‰ï¼Œæ”¯æŒåˆ†æ‰¹å‘é€é™ä½é£æ§
- âœ… **å¯é€‰ sharp å‹ç¼©/è£å‰ª**ï¼šé™ä½å¤§å›¾ä½“ç§¯ä¸å‘é€å¤±è´¥æ¦‚ç‡
- âœ… **ä¸ç¨³å®šæºç«™å¢å¼º**ï¼šBase64 å¼ºåˆ¶å‘é€ã€é™å¹¶å‘æ‹‰å–ã€keep-alive ç­‰

## æ’ä»¶åˆ—è¡¨

| æ’ä»¶ | æŒ‡ä»¤ | å®šæ—¶æ¨é€ | ä¾èµ– | ç®€è¿° |
|---|---|---:|---|---|
| ä»Šæ—¥æ—©æŠ¥ | `#ä»Šæ—¥æ—©æŠ¥` | âœ…ï¼ˆé»˜è®¤ 09:30ï¼‰ | `node-fetch` `node-schedule` | æ‹‰å–â€œ60s æ—©æŠ¥â€å›¾ç‰‡å¹¶æ¨é€ |
| æ‘¸é±¼æ—¥å† | `#æ‘¸é±¼æ—¥å†` | âœ…ï¼ˆé»˜è®¤ 09:00ï¼‰ | `node-fetch` `node-schedule` | æ‹‰å–æ‘¸é±¼äººæ—¥å†å¹¶æ¨é€ |
| ç±³æ¸¸ç¤¾ COSï¼ˆrebornï¼‰ | `#cos` / `mys cos`ï¼ˆå¯åŠ  `ob/icqq/auto/plain`ï¼‰ | âœ…ï¼ˆé»˜è®¤ 12:08:30ï¼‰ | `node-fetch` `node-schedule` `sharp` | éšæœºæŠ“å–ç±³æ¸¸ç¤¾è´´å­å›¾ç‰‡ï¼Œåˆ†æ‰¹åˆå¹¶è½¬å‘ |
| WOC æŠ“å›¾ï¼ˆrebornï¼‰ | `#woc` / `#å§æ§½` | âŒ | `sharp` | WP åª’ä½“åº“æŠ“å›¾ â†’ å¼ºåˆ¶ Base64 â†’ åˆ†æ‰¹åˆå¹¶è½¬å‘ï¼ˆä¼˜å…ˆ icqqï¼‰ |
| XJJ æé€Ÿå¢å¼ºç‰ˆ | `#xjj` / `#é»‘ä¸`ï¼›è§†é¢‘ï¼š`#xjjpro` / `#jkè§†é¢‘` ç­‰ | âŒ | `node-fetch` `sharp` | å¤šæ¥å£èšåˆï¼Œæ”¯æŒå…¨é‡ä¸­è‹±æ–‡åˆ«ååˆ†ç±»ï¼ˆJK/é»‘ä¸/ç½‘çº¢/å˜è£…ç­‰ï¼‰ï¼Œå†…ç½®é˜²ç¼“å­˜ä¸è¿‡æ»¤æ’é”™æœºåˆ¶ |

---

## å®‰è£…

åœ¨ **äº‘å´½æ ¹ç›®å½•** æ‰§è¡Œï¼š

```bash
git clone https://github.com/OriginSXC/Huitian-mini.git ./plugins/Huitian-mini
```

### å®‰è£…ä¾èµ–

æ¨èç›´æ¥ä½¿ç”¨ pnpm çš„è¿‡æ»¤å™¨åŠŸèƒ½ä¸ºæ’ä»¶å®‰è£…ä¾èµ–ï¼š

```bash
pnpm install --filter=Huitian-mini
```

> å¦‚æœè¿è¡Œæ—¶æŠ¥ â€œç¼ºå°‘ sharpâ€ï¼Œè¯´æ˜å®ƒä»¬æ²¡è¢«è£…è¿›å½“å‰çš„ `node_modules`ï¼Œæ‰§è¡Œä¸Šè¿°å‘½ä»¤è¡¥å……å®‰è£…å³å¯ã€‚

### é‡å¯

é‡å¯ Bot åå³å¯ã€‚

---

## é…ç½®è¯´æ˜ (å…¨æ–° YAML é…ç½®)

ä¸ºäº†é˜²æ­¢ `git pull` æ›´æ–°ä»£ç æ—¶äº§ç”Ÿå†²çªï¼Œå¹¶ä¿æŠ¤æ‚¨çš„éšç§æ•°æ®ï¼ˆå¦‚æ¨é€ç¾¤å·ï¼‰ï¼Œæ‰€æœ‰æ’ä»¶å·²å…¨é¢å‡çº§ä¸º **YAML é…ç½®æ–‡ä»¶**ï¼Œ**è¯·å‹¿ç›´æ¥ä¿®æ”¹ JS æºç æ–‡ä»¶**ï¼

### å¦‚ä½•ä¿®æ”¹é…ç½®ï¼Ÿ

1. **æŸ¥çœ‹é»˜è®¤é…ç½®**ï¼šæ’ä»¶çš„æ‰€æœ‰é»˜è®¤å‚æ•°å‡ä½äº `config/default.yaml`ã€‚**ï¼ˆâš ï¸ è¯·å‹¿ç›´æ¥ä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œä»¥å…åç»­æ›´æ–°äº§ç”Ÿä»£ç å†²çªï¼‰**
2. **ç”Ÿæˆç”¨æˆ·é…ç½®**ï¼šå½“æ‚¨é¦–æ¬¡å¯åŠ¨æœºå™¨äººæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨ `config/` ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª `config.yaml` æ–‡ä»¶ã€‚ï¼ˆæ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ–°å»ºæ­¤æ–‡ä»¶ï¼‰
3. **è‡ªå®šä¹‰è¦†ç›–**ï¼šæ‰“å¼€ `config/config.yaml`ï¼Œæ‚¨åªéœ€è¦åœ¨é‡Œé¢å†™å…¥æ‚¨æƒ³è¦ä¿®æ”¹çš„å‚æ•°å³å¯ï¼æœªå†™å…¥çš„å‚æ•°å°†è‡ªåŠ¨ä½¿ç”¨ `default.yaml` ä¸­çš„é»˜è®¤å€¼ã€‚è¯¥æ–‡ä»¶å·²è¢«åŠ å…¥ `.gitignore`ï¼Œç»å¯¹ä¸ä¼šåœ¨æ‚¨æ›´æ–°æˆ–ä¸Šä¼ ä»£ç æ—¶è¢«è¦†ç›–æˆ–æ³„éœ²ã€‚

### `config.yaml` é…ç½®ç¤ºä¾‹ï¼š

```yaml
# æ¯æ—¥æ—©æŠ¥é…ç½®
daily:
  time: '0 30 9 * * *'
  groupList: ['12345678', '87654321'] # å¡«å…¥æ‚¨çš„æ¨é€ç¾¤å·
  isAutoPush: true

# ç±³æ¸¸ç¤¾Cosé…ç½®
mys_cos:
  # æ¨é€ç›®æ ‡ï¼šç¾¤å·å†™ 'group'ï¼ŒQQå·å†™ 'private'
  POSTLIST:
    12345678: 'group'
    87654321: 'private' 
  SEND_MODE_DEFAULT: 'forward-icqq' # åˆå¹¶è½¬å‘æ¨¡å¼ï¼Œå¯é€‰ forward-onebot / forward-auto / plain
```

> **å¸¸è§é…ç½®é¡¹è¯´æ˜**ï¼š
> * **å®šæ—¶æ¨é€æ—¶é—´**ï¼š`time` / `AUTO_CRON`
> * **å®šæ—¶æ¨é€å¼€å…³**ï¼š`isAutoPush`
> * **æ¨é€ç›®æ ‡**ï¼š`groupList` / `POSTLIST`
> * **åˆå¹¶è½¬å‘æ¨¡å¼**ï¼š`SEND_MODE_DEFAULT`
> * **Sharp å‹ç¼©è®¾ç½®**ï¼š`SHARP_ENABLE` / `JPEG_QUALITY` / `SHARP_MAX_BYTES` ç­‰

> **ğŸ’¡ Cron å°è´´å£«**ï¼šè‹¥ `node-schedule` ä¸è®¤ `?`ï¼ˆQuartz é£æ ¼ï¼‰ï¼Œè¯·åœ¨ `config.yaml` ä¸­æŠŠå®šæ—¶è¡¨è¾¾å¼ä» `0 30 9 * * ?` æ”¹æˆ `0 30 9 * * *`ï¼ˆæŠŠ `?` æ›¿æ¢ä¸º `*` å³å¯ï¼‰ã€‚

## æŒ‡ä»¤ç¤ºä¾‹

* **æ—©æŠ¥**ï¼š`#ä»Šæ—¥æ—©æŠ¥`
* **æ‘¸é±¼**ï¼š`#æ‘¸é±¼æ—¥å†`
* **COS**ï¼š`#cos` / `#mys cos`
* **æŒ‡å®šæ¨¡å¼**ï¼š`#cos icqq` / `#cos ob` / `#cos auto` / `#cos plain`
* **WOC**ï¼š`#woc` / `#å§æ§½`
* **XJJ å›¾ç‰‡**ï¼š`#å°å§å§` / `#xjj` / `#é»‘ä¸` / `#jk` / `#ç¾è…¿å›¾ç‰‡`ï¼ˆæ”¯æŒæ•°åç§ä¸­è‹±åˆ†ç±»åŒ¹é…ï¼Œæ··åˆéšæœºæ¥å£ï¼‰
* **XJJ è§†é¢‘**ï¼š`#å°å§å§è§†é¢‘` / `#xjjpro` / `#é»‘ä¸è§†é¢‘` / `#é å©§ç¥pro` / `#æ…¢æ‘‡è§†é¢‘`ï¼ˆèšåˆå¤šå›¾åºŠä¸ç½‘çº¢åˆ†ç±»ç›´è¿ï¼‰

## å…è´£å£°æ˜

* **å¼€æºæ€§è´¨**ï¼šHuitian-mini ä¸ºæ°¸ä¹…å…è´¹é¡¹ç›®ï¼ŒåŸºäº **GNU Affero General Public License v3.0** (ç®€ç§° AGPL v3.0) åè®®å‘å…¬ä¼—å¼€æ”¾ã€‚
* **é¡¹ç›®å®šä½**ï¼šæœ¬é¡¹ç›®ä¸»è¦é¢å‘ Yunzai-Bot ç”¨æˆ·ç¾¤ä½“ï¼Œæ—¨åœ¨ä¿ƒè¿›å†…éƒ¨æŠ€æœ¯äº¤æµä¸å­¦ä¹ ã€‚ç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åº”ä¸¥æ ¼éµå®ˆ AGPL v3.0 å¼€æºåè®®åŠå½“åœ°æ³•å¾‹æ³•è§„ã€‚
* **ç¬¬ä¸‰æ–¹æœåŠ¡**ï¼šæœ¬é¡¹ç›®æ‰€å¼•ç”¨çš„ç¬¬ä¸‰æ–¹ API å‡å°½åŠ›éµå¾ªå…¶å®˜æ–¹ä½¿ç”¨å‡†åˆ™ã€‚å¼€å‘è€…ä¸å¯¹è¯¥ç­‰ API åŠå…¶å†…å®¹çš„åˆæ³•æ€§ã€å‡†ç¡®æ€§æˆ–ç¨³å®šæ€§ä½œä»»ä½•å½¢å¼çš„æ‹…ä¿ã€‚ç”¨æˆ·åº”è‡ªè¡Œè¯„ä¼°å¹¶æ‰¿æ‹…å› è°ƒç”¨ç¬¬ä¸‰æ–¹æœåŠ¡è€Œäº§ç”Ÿçš„æ³•å¾‹åŠç›¸å…³é£é™©ã€‚
